@model BasePageViewModel

@{
    ViewBag.PageTitle = Model.PageTitle;
    ViewBag.MetaDescription = Model.MetaDescription;
    ViewBag.CanonicalUrl = Model.CanonicalUrl;
}

@section Head {
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": "LearningResource",
        "name": "Formula & Unit Reference",
        "learningResourceType": "Reference Guide",
        "description": "Comprehensive reference for mathematical, physics, and chemistry formulas"
    }
    </script>
}

<section class="section-padding bg-gradient-to-br from-[var(--color-primary)] via-[var(--color-secondary)] to-[var(--color-accent)] text-white">
    <div class="container-custom">
        <div class="max-w-4xl mx-auto text-center">
            <div class="text-5xl mb-4">üìê</div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Formula & Unit Reference</h1>
            <p class="text-xl opacity-90">Essential formulas and units for math, physics, and chemistry</p>
        </div>
    </div>
</section>

<section class="section-padding">
    <div class="container-custom max-w-6xl">
        
        <div class="mb-8">
            <div class="flex flex-wrap gap-2">
                <button onclick="filterCategory('all')" class="category-btn active" data-category="all">
                    All
                </button>
                <button onclick="filterCategory('math')" class="category-btn" data-category="math">
                    üìê Mathematics
                </button>
                <button onclick="filterCategory('physics')" class="category-btn" data-category="physics">
                    ‚ö° Physics
                </button>
                <button onclick="filterCategory('chemistry')" class="category-btn" data-category="chemistry">
                    üß™ Chemistry
                </button>
                <button onclick="filterCategory('geometry')" class="category-btn" data-category="geometry">
                    üìè Geometry
                </button>
            </div>
        </div>

        <div class="mb-6">
            <input type="text" id="searchInput" onkeyup="searchFormulas()" 
                   class="w-full px-4 py-3 border border-[var(--color-border)] rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] dark:bg-gray-800"
                   placeholder="üîç Search formulas...">
        </div>

        <div id="formulasContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Formulas will be loaded here -->
        </div>

    </div>
</section>

@section Scripts {
    <script>
        const formulas = [
            // Mathematics
            { category: 'math', name: 'Quadratic Formula', formula: 'x = (-b ¬± ‚àö(b¬≤ - 4ac)) / 2a', description: 'Solves ax¬≤ + bx + c = 0' },
            { category: 'math', name: 'Pythagorean Theorem', formula: 'a¬≤ + b¬≤ = c¬≤', description: 'Right triangle relationship' },
            { category: 'math', name: 'Slope Formula', formula: 'm = (y‚ÇÇ - y‚ÇÅ) / (x‚ÇÇ - x‚ÇÅ)', description: 'Slope between two points' },
            { category: 'math', name: 'Distance Formula', formula: 'd = ‚àö((x‚ÇÇ - x‚ÇÅ)¬≤ + (y‚ÇÇ - y‚ÇÅ)¬≤)', description: 'Distance between two points' },
            { category: 'math', name: 'Area of Circle', formula: 'A = œÄr¬≤', description: 'Circle area' },
            { category: 'math', name: 'Circumference', formula: 'C = 2œÄr', description: 'Circle perimeter' },
            
            // Physics
            { category: 'physics', name: 'Newton\'s Second Law', formula: 'F = ma', description: 'Force equals mass times acceleration' },
            { category: 'physics', name: 'Kinetic Energy', formula: 'KE = ¬Ωmv¬≤', description: 'Energy of motion' },
            { category: 'physics', name: 'Potential Energy', formula: 'PE = mgh', description: 'Gravitational potential energy' },
            { category: 'physics', name: 'Ohm\'s Law', formula: 'V = IR', description: 'Voltage = Current √ó Resistance' },
            { category: 'physics', name: 'Power', formula: 'P = W/t or P = IV', description: 'Power calculation' },
            { category: 'physics', name: 'Speed', formula: 'v = d/t', description: 'Velocity = distance / time' },
            { category: 'physics', name: 'Acceleration', formula: 'a = (v - u)/t', description: 'Change in velocity over time' },
            
            // Chemistry
            { category: 'chemistry', name: 'Ideal Gas Law', formula: 'PV = nRT', description: 'Pressure √ó Volume = moles √ó gas constant √ó Temperature' },
            { category: 'chemistry', name: 'Molarity', formula: 'M = n/V', description: 'Moles per liter' },
            { category: 'chemistry', name: 'pH Formula', formula: 'pH = -log[H‚Å∫]', description: 'Measure of acidity' },
            { category: 'chemistry', name: 'Density', formula: 'œÅ = m/V', description: 'Mass per unit volume' },
            { category: 'chemistry', name: 'Percent Yield', formula: '% = (actual/theoretical) √ó 100', description: 'Efficiency of reaction' },
            
            // Geometry
            { category: 'geometry', name: 'Triangle Area', formula: 'A = ¬Ωbh', description: 'Base times height divided by 2' },
            { category: 'geometry', name: 'Rectangle Area', formula: 'A = lw', description: 'Length times width' },
            { category: 'geometry', name: 'Sphere Volume', formula: 'V = (4/3)œÄr¬≥', description: 'Volume of a sphere' },
            { category: 'geometry', name: 'Cylinder Volume', formula: 'V = œÄr¬≤h', description: 'Volume of a cylinder' },
            { category: 'geometry', name: 'Cone Volume', formula: 'V = (1/3)œÄr¬≤h', description: 'Volume of a cone' },
            { category: 'geometry', name: 'Surface Area of Sphere', formula: 'A = 4œÄr¬≤', description: 'Total surface area' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            displayFormulas(formulas);
        });

        function displayFormulas(formulaList) {
            const container = document.getElementById('formulasContainer');
            container.innerHTML = formulaList.map(f => `
                <div class="card formula-card" data-category="${f.category}">
                    <div class="flex items-start gap-3 mb-3">
                        <div class="flex-shrink-0">
                            ${getCategoryIcon(f.category)}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg mb-1">${f.name}</h3>
                            <p class="text-sm text-[var(--color-text-medium)]">${f.description}</p>
                        </div>
                    </div>
                    <div class="bg-[var(--color-bg)] dark:bg-gray-800 rounded-lg p-4 text-center">
                        <div class="text-xl font-mono font-bold text-[var(--color-primary)]">
                            ${f.formula}
                        </div>
                    </div>
                    <div class="mt-3 text-xs">
                        <span class="px-2 py-1 bg-[var(--color-primary)]/10 text-[var(--color-primary)] rounded">
                            ${f.category.toUpperCase()}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryIcon(category) {
            const icons = {
                'math': 'üìê',
                'physics': '‚ö°',
                'chemistry': 'üß™',
                'geometry': 'üìè'
            };
            return `<div class="text-3xl">${icons[category] || 'üìã'}</div>`;
        }

        function filterCategory(category) {
            const buttons = document.querySelectorAll('.category-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });

            if (category === 'all') {
                displayFormulas(formulas);
            } else {
                const filtered = formulas.filter(f => f.category === category);
                displayFormulas(filtered);
            }
        }

        function searchFormulas() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) {
                displayFormulas(formulas);
                return;
            }

            const filtered = formulas.filter(f => 
                f.name.toLowerCase().includes(query) ||
                f.formula.toLowerCase().includes(query) ||
                f.description.toLowerCase().includes(query)
            );
            displayFormulas(filtered);
        }
    </script>
    
    <style>
        .category-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--color-border);
            border-radius: 0.5rem;
            background: var(--color-surface);
            cursor: pointer;
            transition: all 0.2s;
        }
        .category-btn:hover {
            background: var(--color-bg);
            border-color: var(--color-primary);
        }
        .category-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        .formula-card {
            transition: transform 0.2s;
        }
        .formula-card:hover {
            transform: translateY(-2px);
        }
    </style>
}
